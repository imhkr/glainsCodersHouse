{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/himan/Downloads/Compressed/Glains-Coders-House-master/GlainsCodersHouse/backend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/himan/Downloads/Compressed/Glains-Coders-House-master/GlainsCodersHouse/backend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/himan/Downloads/Compressed/Glains-Coders-House-master/GlainsCodersHouse/backend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import axios from'axios';import{useDispatch}from'react-redux';import{setAuth}from'../store/authSlice';export function useLoadingWithRefresh(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var dispatch=useDispatch();useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/refresh\"),{withCredentials:true});case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;dispatch(setAuth(data));setLoading(false);_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0);setLoading(false);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}))();},[]);return{loading:loading};}","map":{"version":3,"sources":["C:/Users/himan/Downloads/Compressed/Glains-Coders-House-master/GlainsCodersHouse/backend/frontend/src/hooks/useLoadingWithRefresh.js"],"names":["useState","useEffect","axios","useDispatch","setAuth","useLoadingWithRefresh","loading","setLoading","dispatch","get","process","env","REACT_APP_API_URL","withCredentials","data","console","log"],"mappings":"qoBAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,OAAT,KAAwB,oBAAxB,CACA,MAAO,SAASC,CAAAA,qBAAT,EAAiC,CACpC,cAA8BL,QAAQ,CAAC,IAAD,CAAtC,wCAAOM,OAAP,eAAgBC,UAAhB,eACA,GAAMC,CAAAA,QAAQ,CAAGL,WAAW,EAA5B,CACAF,SAAS,CAAC,UAAM,CACZ,wDAAC,mMAE8BC,CAAAA,KAAK,CAACO,GAAN,WAChBC,OAAO,CAACC,GAAR,CAAYC,iBADI,iBAEnB,CACIC,eAAe,CAAE,IADrB,CAFmB,CAF9B,uCAEeC,IAFf,kBAEeA,IAFf,CAQON,QAAQ,CAACJ,OAAO,CAACU,IAAD,CAAR,CAAR,CACAP,UAAU,CAAC,KAAD,CAAV,CATP,+EAWOQ,OAAO,CAACC,GAAR,cACAT,UAAU,CAAC,KAAD,CAAV,CAZP,oEAAD,KAeH,CAhBQ,CAgBN,EAhBM,CAAT,CAkBA,MAAO,CAAED,OAAO,CAAPA,OAAF,CAAP,CACH","sourcesContent":["import { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useDispatch } from 'react-redux';\nimport { setAuth } from '../store/authSlice';\nexport function useLoadingWithRefresh() {\n    const [loading, setLoading] = useState(true);\n    const dispatch = useDispatch();\n    useEffect(() => {\n        (async () => {\n            try {\n                const { data } = await axios.get(\n                    `${process.env.REACT_APP_API_URL}/api/refresh`,\n                    {\n                        withCredentials: true,\n                    }\n                );\n                dispatch(setAuth(data));\n                setLoading(false);\n            } catch (err) {\n                console.log(err);\n                setLoading(false);\n            }\n        })();\n    }, []);\n\n    return { loading };\n}\n"]},"metadata":{},"sourceType":"module"}