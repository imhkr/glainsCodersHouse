{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/himan/Downloads/Compressed/Glains-Coders-House-master/GlainsCodersHouse/backend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/himan/Downloads/Compressed/Glains-Coders-House-master/GlainsCodersHouse/backend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/himan/Downloads/Compressed/Glains-Coders-House-master/GlainsCodersHouse/backend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Card from\"../../../components/shared/Card/Card\";import Button from\"../../../components/shared/Button/Button\";import styles from\"./StepAvatar.module.css\";import{useSelector,useDispatch}from\"react-redux\";import{setAvatar}from\"../../../store/activateSlice\";import{activate}from\"../../../http\";import{setAuth}from\"../../../store/authSlice\";import Loader from\"../../../components/shared/Loader/Loader\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var StepAvatar=function StepAvatar(_ref){var onNext=_ref.onNext;var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.activate;}),name=_useSelector.name,avatar=_useSelector.avatar;var _useState=useState(\"/images/monkey-avatar.png\"),_useState2=_slicedToArray(_useState,2),image=_useState2[0],setImage=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),unMounted=_useState6[0],setUnMounted=_useState6[1];function captureImage(e){var file=e.target.files[0];var reader=new FileReader();reader.readAsDataURL(file);reader.onloadend=function(){setImage(reader.result);dispatch(setAvatar(reader.result));};}function submit(){return _submit.apply(this,arguments);}function _submit(){_submit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$activate,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(avatar){_context.next=3;break;}alert(\"Please Upload Your Profile Picture\");return _context.abrupt(\"return\");case 3:setLoading(true);if(!(name&&avatar)){_context.next=19;break;}_context.prev=5;_context.next=8;return activate({name:name,avatar:avatar});case 8:_yield$activate=_context.sent;data=_yield$activate.data;if(data.auth){if(!unMounted){dispatch(setAuth(data));}}_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](5);console.log(_context.t0);case 16:_context.prev=16;setLoading(false);return _context.finish(16);case 19:case\"end\":return _context.stop();}}},_callee,null,[[5,13,16,19]]);}));return _submit.apply(this,arguments);}useEffect(function(){return function(){setUnMounted(true);};},[]);if(loading)return/*#__PURE__*/_jsx(Loader,{message:\"Activation in progress...\"});return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Card,{title:\"Okay, \".concat(name),icon:\"monkey-emoji\",children:[/*#__PURE__*/_jsx(\"p\",{className:styles.subHeading,children:\"How\\u2019s this photo?\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.avatarWrapper,children:/*#__PURE__*/_jsx(\"img\",{className:styles.avatarImage,src:image,alt:\"avatar\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{onChange:captureImage,id:\"avatarInput\",type:\"file\",className:styles.avatarInput}),/*#__PURE__*/_jsx(\"label\",{className:styles.avatarLabel,htmlFor:\"avatarInput\",children:\"Choose a Photo\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Button,{onClick:submit,text:\"Next\"})})]})});};export default StepAvatar;","map":{"version":3,"sources":["C:/Users/himan/Downloads/Compressed/Glains-Coders-House-master/GlainsCodersHouse/backend/frontend/src/pages/Steps/StepAvatar/StepAvatar.jsx"],"names":["React","useState","useEffect","Card","Button","styles","useSelector","useDispatch","setAvatar","activate","setAuth","Loader","StepAvatar","onNext","dispatch","state","name","avatar","image","setImage","loading","setLoading","unMounted","setUnMounted","captureImage","e","file","target","files","reader","FileReader","readAsDataURL","onloadend","result","submit","alert","data","auth","console","log","subHeading","avatarWrapper","avatarImage","avatarInput","avatarLabel"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Card from \"../../../components/shared/Card/Card\";\nimport Button from \"../../../components/shared/Button/Button\";\nimport styles from \"./StepAvatar.module.css\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { setAvatar } from \"../../../store/activateSlice\";\nimport { activate } from \"../../../http\";\nimport { setAuth } from \"../../../store/authSlice\";\nimport Loader from \"../../../components/shared/Loader/Loader\";\n\nconst StepAvatar = ({ onNext }) => {\n  const dispatch = useDispatch();\n  const { name, avatar } = useSelector((state) => state.activate);\n  const [image, setImage] = useState(\"/images/monkey-avatar.png\");\n  const [loading, setLoading] = useState(false);\n  const [unMounted, setUnMounted] = useState(false);\n\n  function captureImage(e) {\n    const file = e.target.files[0];\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onloadend = function () {\n      setImage(reader.result);\n      dispatch(setAvatar(reader.result));\n    };\n  }\n  async function submit() {\n    if (!avatar) {\n      alert(\"Please Upload Your Profile Picture\");\n      return;\n    }\n    setLoading(true);\n    if (name && avatar) {\n      try {\n        const { data } = await activate({ name, avatar });\n        if (data.auth) {\n          if (!unMounted) {\n            dispatch(setAuth(data));\n          }\n        }\n      } catch (err) {\n        console.log(err);\n      } finally {\n        setLoading(false);\n      }\n    }\n  }\n\n  useEffect(() => {\n    return () => {\n      setUnMounted(true);\n    };\n  }, []);\n\n  if (loading) return <Loader message=\"Activation in progress...\" />;\n  return (\n    <>\n      <Card title={`Okay, ${name}`} icon=\"monkey-emoji\">\n        <p className={styles.subHeading}>Howâ€™s this photo?</p>\n        <div className={styles.avatarWrapper}>\n          <img className={styles.avatarImage} src={image} alt=\"avatar\" />\n        </div>\n        <div>\n          <input\n            onChange={captureImage}\n            id=\"avatarInput\"\n            type=\"file\"\n            className={styles.avatarInput}\n          />\n          <label className={styles.avatarLabel} htmlFor=\"avatarInput\">\n            Choose a Photo\n          </label>\n        </div>\n        <div>\n          <Button onClick={submit} text=\"Next\" />\n        </div>\n      </Card>\n    </>\n  );\n};\n\nexport default StepAvatar;\n"]},"metadata":{},"sourceType":"module"}