{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/himan/Downloads/Compressed/Glains-Coders-House-master/GlainsCodersHouse/backend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/himan/Downloads/Compressed/Glains-Coders-House-master/GlainsCodersHouse/backend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/himan/Downloads/Compressed/Glains-Coders-House-master/GlainsCodersHouse/backend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useSelector}from'react-redux';import{useWebRTC}from'../../hooks/useWebRTC';import{useParams,useHistory}from'react-router-dom';import{getRoom}from'../../http';import styles from'./Room.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Room=function Room(){var user=useSelector(function(state){return state.auth.user;});var _useParams=useParams(),roomId=_useParams.id;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),room=_useState2[0],setRoom=_useState2[1];var _useWebRTC=useWebRTC(roomId,user),clients=_useWebRTC.clients,provideRef=_useWebRTC.provideRef,handleMute=_useWebRTC.handleMute,localStream=_useWebRTC.localStream;var history=useHistory();var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isMuted=_useState4[0],setMuted=_useState4[1];useEffect(function(){var fetchRoom=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$getRoom,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getRoom(roomId);case 2:_yield$getRoom=_context.sent;data=_yield$getRoom.data;setRoom(function(prev){return data;});case 5:case\"end\":return _context.stop();}}},_callee);}));return function fetchRoom(){return _ref.apply(this,arguments);};}();fetchRoom();},[roomId]);useEffect(function(){handleMute(isMuted,user.id);},[isMuted]);var handManualLeave=function handManualLeave(){history.push('/rooms');};var handleMuteClick=function handleMuteClick(clientId){if(clientId!==user.id)return;setMuted(function(prev){return!prev;});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:handManualLeave,className:styles.goBack,children:[/*#__PURE__*/_jsx(\"img\",{src:\"/images/arrow-left.png\",alt:\"arrow-left\"}),/*#__PURE__*/_jsx(\"span\",{children:\"All voice rooms\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.clientsWrap,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.header,children:[room&&/*#__PURE__*/_jsx(\"h2\",{className:styles.topic,children:room.topic}),/*#__PURE__*/_jsxs(\"div\",{className:styles.actions,children:[/*#__PURE__*/_jsx(\"button\",{className:styles.actionBtn,children:/*#__PURE__*/_jsx(\"img\",{src:\"/images/palm.png\",alt:\"palm-icon\"})}),/*#__PURE__*/_jsxs(\"button\",{onClick:handManualLeave,className:styles.actionBtn,children:[/*#__PURE__*/_jsx(\"img\",{src:\"/images/win.png\",alt:\"win-icon\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Leave quietly\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.clientsList,children:clients.map(function(client){return/*#__PURE__*/_jsxs(\"div\",{className:styles.client,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.userHead,children:[/*#__PURE__*/_jsx(\"img\",{className:styles.userAvatar,src:client.avatar,alt:\"\"}),/*#__PURE__*/_jsx(\"audio\",{autoPlay:true,playsInline:true,ref:function ref(instance){provideRef(instance,client.id);}}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleMuteClick(client.id);},className:styles.micBtn,children:client.muted?/*#__PURE__*/_jsx(\"img\",{className:styles.mic,src:\"/images/mic-mute.png\",alt:\"mic\"}):/*#__PURE__*/_jsx(\"img\",{className:styles.micImg,src:\"/images/mic.png\",alt:\"mic\"})})]}),/*#__PURE__*/_jsx(\"h4\",{children:client.name})]},client.id);})})]})]});};export default Room;","map":{"version":3,"sources":["C:/Users/himan/Downloads/Compressed/Glains-Coders-House-master/GlainsCodersHouse/backend/frontend/src/pages/Room/Room.jsx"],"names":["React","useState","useEffect","useSelector","useWebRTC","useParams","useHistory","getRoom","styles","Room","user","state","auth","roomId","id","room","setRoom","clients","provideRef","handleMute","localStream","history","isMuted","setMuted","fetchRoom","data","prev","handManualLeave","push","handleMuteClick","clientId","goBack","clientsWrap","header","topic","actions","actionBtn","clientsList","map","client","userHead","userAvatar","avatar","instance","micBtn","muted","mic","micImg","name"],"mappings":"qoBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,SAAT,KAA0B,uBAA1B,CACA,OAASC,SAAT,CAAoBC,UAApB,KAAsC,kBAAtC,CACA,OAASC,OAAT,KAAwB,YAAxB,CAEA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,C,wFAEA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAM,CACf,GAAMC,CAAAA,IAAI,CAAGP,WAAW,CAAC,SAACQ,KAAD,QAAWA,CAAAA,KAAK,CAACC,IAAN,CAAWF,IAAtB,EAAD,CAAxB,CACA,eAAuBL,SAAS,EAAhC,CAAYQ,MAAZ,YAAQC,EAAR,CACA,cAAwBb,QAAQ,CAAC,IAAD,CAAhC,wCAAOc,IAAP,eAAaC,OAAb,eAEA,eAAyDZ,SAAS,CAC9DS,MAD8D,CAE9DH,IAF8D,CAAlE,CAAQO,OAAR,YAAQA,OAAR,CAAiBC,UAAjB,YAAiBA,UAAjB,CAA6BC,UAA7B,YAA6BA,UAA7B,CAAyCC,WAAzC,YAAyCA,WAAzC,CAKA,GAAMC,CAAAA,OAAO,CAAGf,UAAU,EAA1B,CAEA,eAA4BL,QAAQ,CAAC,IAAD,CAApC,yCAAOqB,OAAP,eAAgBC,QAAhB,eAEArB,SAAS,CAAC,UAAM,CACZ,GAAMsB,CAAAA,SAAS,0FAAG,iLACSjB,CAAAA,OAAO,CAACM,MAAD,CADhB,qCACNY,IADM,gBACNA,IADM,CAEdT,OAAO,CAAC,SAACU,IAAD,QAAUD,CAAAA,IAAV,EAAD,CAAP,CAFc,sDAAH,kBAATD,CAAAA,SAAS,0CAAf,CAKAA,SAAS,GACZ,CAPQ,CAON,CAACX,MAAD,CAPM,CAAT,CASAX,SAAS,CAAC,UAAM,CACZiB,UAAU,CAACG,OAAD,CAAUZ,IAAI,CAACI,EAAf,CAAV,CACH,CAFQ,CAEN,CAACQ,OAAD,CAFM,CAAT,CAIA,GAAMK,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC1BN,OAAO,CAACO,IAAR,CAAa,QAAb,EACH,CAFD,CAIA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,QAAD,CAAc,CAClC,GAAIA,QAAQ,GAAKpB,IAAI,CAACI,EAAtB,CAA0B,OAC1BS,QAAQ,CAAC,SAACG,IAAD,QAAU,CAACA,IAAX,EAAD,CAAR,CACH,CAHD,CAKA,mBACI,oCACI,YAAK,SAAS,CAAC,WAAf,uBACI,gBAAQ,OAAO,CAAEC,eAAjB,CAAkC,SAAS,CAAEnB,MAAM,CAACuB,MAApD,wBACI,YAAK,GAAG,CAAC,wBAAT,CAAkC,GAAG,CAAC,YAAtC,EADJ,cAEI,yCAFJ,GADJ,EADJ,cAOI,aAAK,SAAS,CAAEvB,MAAM,CAACwB,WAAvB,wBACI,aAAK,SAAS,CAAExB,MAAM,CAACyB,MAAvB,WACKlB,IAAI,eAAI,WAAI,SAAS,CAAEP,MAAM,CAAC0B,KAAtB,UAA8BnB,IAAI,CAACmB,KAAnC,EADb,cAEI,aAAK,SAAS,CAAE1B,MAAM,CAAC2B,OAAvB,wBACI,eAAQ,SAAS,CAAE3B,MAAM,CAAC4B,SAA1B,uBACI,YAAK,GAAG,CAAC,kBAAT,CAA4B,GAAG,CAAC,WAAhC,EADJ,EADJ,cAII,gBACI,OAAO,CAAET,eADb,CAEI,SAAS,CAAEnB,MAAM,CAAC4B,SAFtB,wBAII,YAAK,GAAG,CAAC,iBAAT,CAA2B,GAAG,CAAC,UAA/B,EAJJ,cAKI,uCALJ,GAJJ,GAFJ,GADJ,cAgBI,YAAK,SAAS,CAAE5B,MAAM,CAAC6B,WAAvB,UACKpB,OAAO,CAACqB,GAAR,CAAY,SAACC,MAAD,CAAY,CACrB,mBACI,aAAK,SAAS,CAAE/B,MAAM,CAAC+B,MAAvB,wBACI,aAAK,SAAS,CAAE/B,MAAM,CAACgC,QAAvB,wBACI,YACI,SAAS,CAAEhC,MAAM,CAACiC,UADtB,CAEI,GAAG,CAAEF,MAAM,CAACG,MAFhB,CAGI,GAAG,CAAC,EAHR,EADJ,cAMI,cACI,QAAQ,KADZ,CAEI,WAAW,KAFf,CAGI,GAAG,CAAE,aAACC,QAAD,CAAc,CACfzB,UAAU,CAACyB,QAAD,CAAWJ,MAAM,CAACzB,EAAlB,CAAV,CACH,CALL,EANJ,cAaI,eACI,OAAO,CAAE,yBACLe,CAAAA,eAAe,CAACU,MAAM,CAACzB,EAAR,CADV,EADb,CAII,SAAS,CAAEN,MAAM,CAACoC,MAJtB,UAMKL,MAAM,CAACM,KAAP,cACG,YACI,SAAS,CAAErC,MAAM,CAACsC,GADtB,CAEI,GAAG,CAAC,sBAFR,CAGI,GAAG,CAAC,KAHR,EADH,cAOG,YACI,SAAS,CAAEtC,MAAM,CAACuC,MADtB,CAEI,GAAG,CAAC,iBAFR,CAGI,GAAG,CAAC,KAHR,EAbR,EAbJ,GADJ,cAmCI,oBAAKR,MAAM,CAACS,IAAZ,EAnCJ,GAAoCT,MAAM,CAACzB,EAA3C,CADJ,CAuCH,CAxCA,CADL,EAhBJ,GAPJ,GADJ,CAsEH,CA1GD,CA4GA,cAAeL,CAAAA,IAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useWebRTC } from '../../hooks/useWebRTC';\nimport { useParams, useHistory } from 'react-router-dom';\nimport { getRoom } from '../../http';\n\nimport styles from './Room.module.css';\n\nconst Room = () => {\n    const user = useSelector((state) => state.auth.user);\n    const { id: roomId } = useParams();\n    const [room, setRoom] = useState(null);\n\n    const { clients, provideRef, handleMute, localStream } = useWebRTC(\n        roomId,\n        user\n    );\n\n    const history = useHistory();\n\n    const [isMuted, setMuted] = useState(true);\n\n    useEffect(() => {\n        const fetchRoom = async () => {\n            const { data } = await getRoom(roomId);\n            setRoom((prev) => data);\n        };\n\n        fetchRoom();\n    }, [roomId]);\n\n    useEffect(() => {\n        handleMute(isMuted, user.id);\n    }, [isMuted]);\n\n    const handManualLeave = () => {\n        history.push('/rooms');\n    };\n\n    const handleMuteClick = (clientId) => {\n        if (clientId !== user.id) return;\n        setMuted((prev) => !prev);\n    };\n\n    return (\n        <div>\n            <div className=\"container\">\n                <button onClick={handManualLeave} className={styles.goBack}>\n                    <img src=\"/images/arrow-left.png\" alt=\"arrow-left\" />\n                    <span>All voice rooms</span>\n                </button>\n            </div>\n            <div className={styles.clientsWrap}>\n                <div className={styles.header}>\n                    {room && <h2 className={styles.topic}>{room.topic}</h2>}\n                    <div className={styles.actions}>\n                        <button className={styles.actionBtn}>\n                            <img src=\"/images/palm.png\" alt=\"palm-icon\" />\n                        </button>\n                        <button\n                            onClick={handManualLeave}\n                            className={styles.actionBtn}\n                        >\n                            <img src=\"/images/win.png\" alt=\"win-icon\" />\n                            <span>Leave quietly</span>\n                        </button>\n                    </div>\n                </div>\n                <div className={styles.clientsList}>\n                    {clients.map((client) => {\n                        return (\n                            <div className={styles.client} key={client.id}>\n                                <div className={styles.userHead}>\n                                    <img\n                                        className={styles.userAvatar}\n                                        src={client.avatar}\n                                        alt=\"\"\n                                    />\n                                    <audio\n                                        autoPlay\n                                        playsInline\n                                        ref={(instance) => {\n                                            provideRef(instance, client.id);\n                                        }}\n                                    />\n                                    <button\n                                        onClick={() =>\n                                            handleMuteClick(client.id)\n                                        }\n                                        className={styles.micBtn}\n                                    >\n                                        {client.muted ? (\n                                            <img\n                                                className={styles.mic}\n                                                src=\"/images/mic-mute.png\"\n                                                alt=\"mic\"\n                                            />\n                                        ) : (\n                                            <img\n                                                className={styles.micImg}\n                                                src=\"/images/mic.png\"\n                                                alt=\"mic\"\n                                            />\n                                        )}\n                                    </button>\n                                </div>\n                                <h4>{client.name}</h4>\n                            </div>\n                        );\n                    })}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Room;\n"]},"metadata":{},"sourceType":"module"}