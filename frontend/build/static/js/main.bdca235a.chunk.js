(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{110:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(45),o=n.n(c),s=n(15),i=n(50),u=(n(78),n(29)),l=n(7),j=n(42),d=n.n(j),p=n(48),b=n.n(p),m=n(0),h=function(e){var t=e.title,n=e.icon,a=e.children;return Object(m.jsxs)("div",{className:b.a.card,children:[Object(m.jsxs)("div",{className:b.a.headingWrapper,children:[n&&Object(m.jsx)("img",{src:"/images/".concat(n,".png"),alt:"logo"}),t&&Object(m.jsx)("h1",{className:b.a.heading,children:t})]}),a]})},f=n(53),O=n.n(f),x=function(e){var t=e.text,n=e.onClick;return Object(m.jsxs)("button",{onClick:n,className:O.a.button,children:[Object(m.jsx)("span",{children:t}),Object(m.jsx)("img",{className:O.a.arrow,src:"/images/arrow-forward.png",alt:"arrow"})]})},v=function(){var e=Object(l.g)();return Object(m.jsx)("div",{className:d.a.cardWrapper,children:Object(m.jsxs)(h,{title:"Welcome to Codershouse!",icon:"logo",children:[Object(m.jsx)("p",{className:d.a.text,children:"We\u2019re working hard to get Glains Codershouse ready for everyone! While we wrap up the finishing youches, we\u2019re adding people gradually to make sure nothing breaks"}),Object(m.jsx)("div",{children:Object(m.jsx)(x,{onClick:function(){e.push("/authenticate")},text:"Let's Go"})}),Object(m.jsx)("div",{className:d.a.signinWrapper,children:Object(m.jsx)("span",{className:d.a.hasInvite,children:"Welcome ,Thank You for visiting here."})})]})})},_=n(3),g=n.n(_),N=n(6),k=n(39),y=n.n(k),w=y.a.create({baseURL:"http://localhost:5500",withCredentials:!0,headers:{"Content-type":"application/json",Accept:"application/json"}}),R=function(e){return w.post("/api/send-otp",e)},C=function(e){return w.post("/api/verify-otp",e)},S=function(e){return w.post("/api/activate",e)},B=function(){return w.post("/api/logout")},I=function(e){return w.post("/api/rooms",e)},A=function(e){return w.get("/api/rooms/".concat(e))};w.interceptors.response.use((function(e){return e}),function(){var e=Object(N.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.config,401!==t.response.status||!n||n._isRetry){e.next=12;break}return n.isRetry=!0,e.prev=3,e.next=6,y.a.get("".concat("http://localhost:5500","/api/refresh"),{withCredentials:!0});case 6:return e.abrupt("return",w.request(n));case 9:e.prev=9,e.t0=e.catch(3),console.log(e.t0.message);case 12:throw t;case 13:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}());var W=n(43),P=n.n(W),E=n(5),L=n(36),T=Object(L.b)({name:"auth",initialState:{isAuth:!1,user:null,otp:{phone:"",hash:""}},reducers:{setAuth:function(e,t){var n=t.payload.user;e.user=n,e.isAuth=null!==n},setOtp:function(e,t){var n=t.payload,a=n.phone,r=n.hash;e.otp.phone=a,e.otp.hash=r}}}),M=T.actions,H=M.setAuth,D=M.setOtp,F=T.reducer,U=function(){var e=Object(E.b)(),t=Object(E.c)((function(e){return e.auth})),n=t.isAuth,a=t.user;function r(){return(r=Object(N.a)(g.a.mark((function t(){var n,a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B();case 3:n=t.sent,a=n.data,e(H(a)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}return Object(m.jsxs)("nav",{className:"".concat(P.a.navbar," container"),children:[Object(m.jsxs)(u.b,{style:{color:"#fff",textDecoration:"none",fontWeight:"bold",fontSize:"22px",display:"flex",alignItems:"center"},to:"/",children:[Object(m.jsx)("img",{src:"/images/logo.png",alt:"logo"}),Object(m.jsx)("span",{style:{marginLeft:"10px"},children:"Glaians Codershouse"})]}),n&&Object(m.jsxs)("div",{className:P.a.navRight,children:[Object(m.jsx)("h3",{children:null===a||void 0===a?void 0:a.name}),Object(m.jsx)(u.b,{to:"/",children:Object(m.jsx)("img",{className:P.a.avatar,src:a.avatar?a.avatar:"/images/monkey-avatar.png",width:"40",height:"40",alt:"avatar"})}),Object(m.jsx)("button",{className:P.a.logoutButton,onClick:function(){return r.apply(this,arguments)},children:Object(m.jsx)("img",{src:"/images/logout.png",alt:"logout"})})]})]})},J=n(2),K=n(66),z=n.n(K),G=function(e){return Object(m.jsx)("div",{children:Object(m.jsx)("input",Object(s.a)({className:z.a.input,style:{width:"true"===e.fullwidth?"100%":"inherit"},type:"text"},e))})},Z=n(24),X=n.n(Z),Y=(n(44),{phone:function(e){var t=e.onNext,n=Object(a.useState)(""),r=Object(J.a)(n,2),c=r[0],o=r[1],s=Object(E.b)();function i(){return(i=Object(N.a)(g.a.mark((function e(){var n,a,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return");case 2:if(n=/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im,!c.match(n)){e.next=13;break}return e.next=6,R({phone:c});case 6:a=e.sent,r=a.data,console.log(r),s(D({phone:r.phone,hash:r.hash})),t(),e.next=15;break;case 13:return alert("Please Enter a Valid Phone Number"),e.abrupt("return");case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(m.jsxs)(h,{title:"Enter you phone number",icon:"phone",children:[Object(m.jsx)(G,{value:c,onChange:function(e){return o(e.target.value)}}),Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:X.a.actionButtonWrap,children:Object(m.jsx)(x,{text:"Next",onClick:function(){return i.apply(this,arguments)}})}),Object(m.jsx)("p",{className:X.a.bottomParagraph,children:"By entering your number, you\u2019re agreeing to our Terms of Service and Privacy Policy. Thanks!"})]})]})},email:function(e){var t=e.onNext,n=Object(a.useState)(""),r=Object(J.a)(n,2),c=r[0],o=r[1];return Object(m.jsxs)(h,{title:"Enter your email id",icon:"email-emoji",children:[Object(m.jsx)(G,{value:c,onChange:function(e){return o(e.target.value)}}),Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:X.a.actionButtonWrap,children:Object(m.jsx)(x,{text:"Next",onClick:t})}),Object(m.jsx)("p",{className:X.a.bottomParagraph,children:"By entering your number, you\u2019re agreeing to our Terms of Service and Privacy Policy. Thanks!"})]})]})}}),q=function(e){var t=e.onNext,n=Object(a.useState)("phone"),r=Object(J.a)(n,2),c=r[0],o=r[1],s=Y[c];return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:X.a.cardWrapper,children:Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:X.a.buttonWrap,children:Object(m.jsx)("button",{className:"".concat(X.a.tabButton," ").concat("phone"===c?X.a.active:""),onClick:function(){return o("phone")},children:Object(m.jsx)("img",{src:"/images/phone-white.png",alt:"phone"})})}),Object(m.jsx)(s,{onNext:t})]})})})},Q=n(49),V=n.n(Q),$={1:q,2:function(){var e=Object(a.useState)(""),t=Object(J.a)(e,2),n=t[0],r=t[1],c=Object(E.b)(),o=Object(E.c)((function(e){return e.auth.otp})),s=o.phone,i=o.hash;function u(){return(u=Object(N.a)(g.a.mark((function e(){var t,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&s&&i){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,C({otp:n,phone:s,hash:i});case 5:t=e.sent,a=t.data,c(H(a)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:V.a.cardWrapper,children:Object(m.jsxs)(h,{title:"Enter the code we just texted you",icon:"lock-emoji",children:[Object(m.jsx)(G,{value:n,onChange:function(e){return r(e.target.value)}}),Object(m.jsx)("div",{className:V.a.actionButtonWrap,children:Object(m.jsx)(x,{onClick:function(){return u.apply(this,arguments)},text:"Next"})}),Object(m.jsx)("p",{className:V.a.bottomParagraph,children:"By entering your number, you\u2019re agreeing to our Terms of Service and Privacy Policy. Thanks!"})]})})})}},ee=function(){var e=Object(a.useState)(1),t=Object(J.a)(e,2),n=t[0],r=t[1],c=$[n];return Object(m.jsx)(c,{onNext:function(){r(n+1)}})},te=Object(L.b)({name:"activate",initialState:{name:"",avatar:""},reducers:{setName:function(e,t){e.name=t.payload},setAvatar:function(e,t){e.avatar=t.payload}}}),ne=te.actions,ae=ne.setName,re=ne.setAvatar,ce=te.reducer,oe=n(67),se=n.n(oe),ie=function(e){var t=e.onNext,n=Object(E.c)((function(e){return e.activate})).name,r=Object(E.b)(),c=Object(a.useState)(n),o=Object(J.a)(c,2),s=o[0],i=o[1];return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(h,{title:"What\u2019s your full name?",icon:"goggle-emoji",children:[Object(m.jsx)(G,{value:s,onChange:function(e){return i(e.target.value)}}),Object(m.jsx)("p",{className:se.a.paragraph,children:"Please use your real name \ud83d\ude4f"}),Object(m.jsx)("div",{children:Object(m.jsx)(x,{onClick:function(){s&&(r(ae(s)),t())},text:"Next"})})]})})},ue=n(37),le=n.n(ue),je=n(56),de=n.n(je),pe=function(e){var t=e.message;return Object(m.jsx)("div",{className:"cardWrapper",children:Object(m.jsxs)(h,{children:[Object(m.jsxs)("svg",{className:de.a.spinner,width:"42",height:"42",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(m.jsx)("circle",{cx:"21",cy:"21",r:"18",stroke:"#C4C5C5",strokeWidth:"4"}),Object(m.jsx)("path",{d:"M20.778 1.001A20 20 0 111.542 25.627l3.876-.922a16.016 16.016 0 1015.404-19.72l-.044-3.984z",fill:"#5453E0"})]}),Object(m.jsx)("span",{className:de.a.message,children:t})]})})},be={1:ie,2:function(e){e.onNext;var t=Object(E.b)(),n=Object(E.c)((function(e){return e.activate})),r=n.name,c=n.avatar,o=Object(a.useState)("/images/monkey-avatar.png"),s=Object(J.a)(o,2),i=s[0],u=s[1],l=Object(a.useState)(!1),j=Object(J.a)(l,2),d=j[0],p=j[1],b=Object(a.useState)(!1),f=Object(J.a)(b,2),O=f[0],v=f[1];function _(){return(_=Object(N.a)(g.a.mark((function e(){var n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=3;break}return alert("Please Upload Your Profile Picture"),e.abrupt("return");case 3:if(p(!0),!r||!c){e.next=19;break}return e.prev=5,e.next=8,S({name:r,avatar:c});case 8:n=e.sent,(a=n.data).auth&&(O||t(H(a))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),console.log(e.t0);case 16:return e.prev=16,p(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[5,13,16,19]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){return function(){v(!0)}}),[]),d?Object(m.jsx)(pe,{message:"Activation in progress..."}):Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(h,{title:"Okay, ".concat(r),icon:"monkey-emoji",children:[Object(m.jsx)("p",{className:le.a.subHeading,children:"How\u2019s this photo?"}),Object(m.jsx)("div",{className:le.a.avatarWrapper,children:Object(m.jsx)("img",{className:le.a.avatarImage,src:i,alt:"avatar"})}),Object(m.jsxs)("div",{children:[Object(m.jsx)("input",{onChange:function(e){var n=e.target.files[0],a=new FileReader;a.readAsDataURL(n),a.onloadend=function(){u(a.result),t(re(a.result))}},id:"avatarInput",type:"file",className:le.a.avatarInput}),Object(m.jsx)("label",{className:le.a.avatarLabel,htmlFor:"avatarInput",children:"Choose a Photo"})]}),Object(m.jsx)("div",{children:Object(m.jsx)(x,{onClick:function(){return _.apply(this,arguments)},text:"Next"})})]})})}},me=function(){var e=Object(a.useState)(1),t=Object(J.a)(e,2),n=t[0],r=t[1],c=be[n];return Object(m.jsx)("div",{className:"cardWrapper",children:Object(m.jsx)(c,{onNext:function(){r(n+1)}})})},he=n(22),fe=n.n(he),Oe=function(e){var t=e.onClose,n=Object(l.g)(),r=Object(a.useState)("open"),c=Object(J.a)(r,2),o=c[0],s=c[1],i=Object(a.useState)(""),u=Object(J.a)(i,2),j=u[0],d=u[1];function p(){return(p=Object(N.a)(g.a.mark((function e(){var t,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,j){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,I({topic:j,roomType:o});case 5:t=e.sent,a=t.data,n.push("/room/".concat(a.id)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}return Object(m.jsx)("div",{className:fe.a.modalMask,children:Object(m.jsxs)("div",{className:fe.a.modalBody,children:[Object(m.jsx)("button",{onClick:t,className:fe.a.closeButton,children:Object(m.jsx)("img",{src:"/images/close.png",alt:"close"})}),Object(m.jsxs)("div",{className:fe.a.modalHeader,children:[Object(m.jsx)("h3",{className:fe.a.heading,children:"Enter the topic to be disscussed"}),Object(m.jsx)(G,{fullwidth:"true",value:j,onChange:function(e){return d(e.target.value)}}),Object(m.jsx)("h2",{className:fe.a.subHeading,children:"Room Type "}),Object(m.jsx)("div",{className:fe.a.roomTypes,children:Object(m.jsxs)("div",{onClick:function(){return s("open")},className:"".concat(fe.a.typeBox," ").concat("open"===o?fe.a.active:""),children:[Object(m.jsx)("img",{src:"/images/globe.png",alt:"globe"}),Object(m.jsx)("span",{children:"Open"})]})})]}),Object(m.jsxs)("div",{className:fe.a.modalFooter,children:[Object(m.jsx)("h2",{children:"Start a room, open to everyone"}),Object(m.jsxs)("button",{onClick:function(){return p.apply(this,arguments)},className:fe.a.footerButton,children:[Object(m.jsx)("img",{src:"/images/celebration.png",alt:"celebration"}),Object(m.jsx)("span",{children:"Let's go"})]})]})]})})},xe=n(30),ve=n.n(xe),_e=function(e){var t=e.room,n=Object(l.g)();return Object(m.jsxs)("div",{onClick:function(){n.push("/room/".concat(t.id))},className:ve.a.card,children:[Object(m.jsx)("h3",{className:ve.a.topic,children:t.topic}),Object(m.jsxs)("div",{className:"".concat(ve.a.speakers," ").concat(1===t.speakers.length?ve.a.singleSpeaker:""),children:[Object(m.jsx)("div",{className:ve.a.avatars,children:t.speakers.map((function(e){return Object(m.jsx)("img",{src:e.avatar,alt:"speaker-avatar"},e.id)}))}),Object(m.jsx)("div",{className:ve.a.names,children:t.speakers.map((function(e){return Object(m.jsxs)("div",{className:ve.a.nameWrapper,children:[Object(m.jsx)("span",{children:e.name}),Object(m.jsx)("img",{src:"/images/chat-bubble.png",alt:"chat-bubble"})]},e.id)}))})]}),Object(m.jsxs)("div",{className:ve.a.peopleCount,children:[Object(m.jsx)("span",{children:t.totalPeople}),Object(m.jsx)("img",{src:"/images/user-icon.png",alt:"user-icon"})]})]})},ge=n(31),Ne=n.n(ge),ke=function(){var e=Object(a.useState)(!1),t=Object(J.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),o=Object(J.a)(c,2),s=o[0],i=o[1];return Object(a.useEffect)((function(){(function(){var e=Object(N.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.get("/api/rooms");case 2:t=e.sent,n=t.data,i(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"container",children:[Object(m.jsxs)("div",{className:Ne.a.roomsHeader,children:[Object(m.jsx)("div",{className:Ne.a.left,children:Object(m.jsx)("span",{className:Ne.a.heading,children:"All voice rooms"})}),Object(m.jsx)("div",{className:Ne.a.right,children:Object(m.jsxs)("button",{onClick:function(){r(!0)},className:Ne.a.startRoomButton,children:[Object(m.jsx)("img",{src:"/images/add-room-icon.png",alt:"add-room"}),Object(m.jsx)("span",{children:"Start a room"})]})})]}),Object(m.jsx)("div",{className:Ne.a.roomList,children:s.map((function(e){return Object(m.jsx)(_e,{room:e},e.id)}))})]}),n&&Object(m.jsx)(Oe,{onClose:function(){return r(!1)}})]})},ye=n(73),we="join",Re="leave",Ce="add-peer",Se="remove-peer",Be="relay-ice",Ie="relay-sdp",Ae="session-description",We="ice-candidate",Pe="mute",Ee="unmute",Le=n(72),Te=function(){return Object(Le.a)("http://localhost:5500",{"force new connection":!0,reconnectionAttempts:"Infinity",timeout:1e4,transports:["websocket"]})},Me=n(71),He=n.n(Me),De=function(e,t){var n=function(e){var t=Object(a.useState)(e),n=Object(J.a)(t,2),r=n[0],c=n[1],o=Object(a.useRef)(null),s=Object(a.useCallback)((function(e,t){o.current=t,c((function(t){return"function"===typeof e?e(t):e}))}),[]);return Object(a.useEffect)((function(){o.current&&(o.current(r),o.current=null)}),[r]),[r,s]}([]),r=Object(J.a)(n,2),c=r[0],o=r[1],i=Object(a.useRef)({}),u=Object(a.useRef)({}),l=Object(a.useRef)(null),j=Object(a.useRef)(null),d=Object(a.useRef)([]),p=Object(a.useCallback)((function(e,t){var n=c.find((function(t){return t.id===e.id}));console.log("clients",c,n),void 0===n&&o((function(t){return[].concat(Object(ye.a)(t),[e])}),t)}),[c,o]);Object(a.useEffect)((function(){l.current=Te()}),[]),Object(a.useEffect)((function(){var e=function(){var e=Object(N.a)(g.a.mark((function e(n){var a,r,c,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.peerId,r=n.createOffer,c=n.user,!(a in u.current)){e.next=3;break}return e.abrupt("return",console.warn("You are already connected with ".concat(a," (").concat(t.name,")")));case 3:if(u.current[a]=new RTCPeerConnection({iceServers:He()()}),u.current[a].onicecandidate=function(e){l.current.emit(Be,{peerId:a,icecandidate:e.candidate})},u.current[a].ontrack=function(e){var t=Object(J.a)(e.streams,1)[0];p(Object(s.a)(Object(s.a)({},c),{},{muted:!0}),(function(){if(i.current[c.id])i.current[c.id].srcObject=t;else var e=!1,n=setInterval((function(){i.current[c.id]&&(i.current[c.id].srcObject=t,e=!0),e&&clearInterval(n)}),1e3)}))},j.current.getTracks().forEach((function(e){u.current[a].addTrack(e,j.current)})),!r){e.next=14;break}return e.next=10,u.current[a].createOffer();case 10:return o=e.sent,e.next=13,u.current[a].setLocalDescription(o);case 13:l.current.emit(Ie,{peerId:a,sessionDescription:o});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.current.on(Ce,e),function(){l.current.off(Ce)}}),[c]),Object(a.useEffect)((function(){return function(){var e=Object(N.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!0});case 2:j.current=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().then((function(){p(Object(s.a)(Object(s.a)({},t),{},{muted:!0}),(function(){var e=i.current[t.id];e&&(e.volume=0,e.srcObject=j.current)})),l.current.emit(we,{roomId:e,user:t})})),function(){j.current.getTracks().forEach((function(e){return e.stop()})),l.current.emit(Re,{roomId:e})}}),[]),Object(a.useEffect)((function(){return l.current.on(We,(function(e){var t=e.peerId,n=e.icecandidate;n&&u.current[t].addIceCandidate(n)})),function(){l.current.off(We)}}),[]),Object(a.useEffect)((function(){var e=function(){var e=Object(N.a)(g.a.mark((function e(t){var n,a,r,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.peerId,a=t.sessionDescription,u.current[n].setRemoteDescription(new RTCSessionDescription(a)),"offer"!==a.type){e.next=9;break}return r=u.current[n],e.next=6,r.createAnswer();case 6:c=e.sent,r.setLocalDescription(c),l.current.emit(Ie,{peerId:n,sessionDescription:c});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.current.on(Ae,e),function(){l.current.off(Ae)}}),[]),Object(a.useEffect)((function(){window.addEventListener("unload",(function(){alert("leaving"),l.current.emit(Re,{roomId:e})}))}),[]),Object(a.useEffect)((function(){return l.current.on(Se,(function(e){var t=e.peerID,n=e.userId;console.log("leaving",t,n),u.current[t]&&u.current[t].close(),delete u.current[t],delete i.current[t],o((function(e){return e.filter((function(e){return e.id!==n}))}))})),function(){l.current.off(Se)}}),[]),Object(a.useEffect)((function(){l.current.on(Pe,(function(t){t.peerId;var n=t.userId;console.log("muting",n),e(!0,n)})),l.current.on(Ee,(function(t){t.peerId;var n=t.userId;console.log("unmuting",n),e(!1,n)}));var e=function(e,t){var n=d.current.map((function(e){return e.id})).indexOf(t);console.log("idx",n);var a=JSON.parse(JSON.stringify(d.current));n>-1&&(a[n].muted=e,console.log("muuuu",a),o((function(e){return a})))}}),[]);Object(a.useEffect)((function(){d.current=c}),[c]);return{clients:c,provideRef:function(e,t){i.current[t]=e},handleMute:function(n,a){var r=!1;if(a===t.id)var c=setInterval((function(){j.current&&(j.current.getTracks()[0].enabled=!n,n?l.current.emit(Pe,{roomId:e,userId:t.id}):l.current.emit(Ee,{roomId:e,userId:t.id}),r=!0),r&&clearInterval(c)}),200)},localStream:j.current}},Fe=n(13),Ue=n.n(Fe),Je=function(){var e=Object(E.c)((function(e){return e.auth.user})),t=Object(l.h)().id,n=Object(a.useState)(null),r=Object(J.a)(n,2),c=r[0],o=r[1],s=De(t,e),i=s.clients,u=s.provideRef,j=s.handleMute,d=(s.localStream,Object(l.g)()),p=Object(a.useState)(!0),b=Object(J.a)(p,2),h=b[0],f=b[1];Object(a.useEffect)((function(){(function(){var e=Object(N.a)(g.a.mark((function e(){var n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t);case 2:n=e.sent,a=n.data,o((function(e){return a}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(a.useEffect)((function(){j(h,e.id)}),[h]);var O=function(){d.push("/rooms")};return Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)("button",{onClick:O,className:Ue.a.goBack,children:[Object(m.jsx)("img",{src:"/images/arrow-left.png",alt:"arrow-left"}),Object(m.jsx)("span",{children:"All voice rooms"})]})}),Object(m.jsxs)("div",{className:Ue.a.clientsWrap,children:[Object(m.jsxs)("div",{className:Ue.a.header,children:[c&&Object(m.jsx)("h2",{className:Ue.a.topic,children:c.topic}),Object(m.jsxs)("div",{className:Ue.a.actions,children:[Object(m.jsx)("button",{className:Ue.a.actionBtn,children:Object(m.jsx)("img",{src:"/images/palm.png",alt:"palm-icon"})}),Object(m.jsxs)("button",{onClick:O,className:Ue.a.actionBtn,children:[Object(m.jsx)("img",{src:"/images/win.png",alt:"win-icon"}),Object(m.jsx)("span",{children:"Leave quietly"})]})]})]}),Object(m.jsx)("div",{className:Ue.a.clientsList,children:i.map((function(t){return Object(m.jsxs)("div",{className:Ue.a.client,children:[Object(m.jsxs)("div",{className:Ue.a.userHead,children:[Object(m.jsx)("img",{className:Ue.a.userAvatar,src:t.avatar,alt:""}),Object(m.jsx)("audio",{autoPlay:!0,playsInline:!0,ref:function(e){u(e,t.id)}}),Object(m.jsx)("button",{onClick:function(){t.id===e.id&&f((function(e){return!e}))},className:Ue.a.micBtn,children:t.muted?Object(m.jsx)("img",{className:Ue.a.mic,src:"/images/mic-mute.png",alt:"mic"}):Object(m.jsx)("img",{className:Ue.a.micImg,src:"/images/mic.png",alt:"mic"})})]}),Object(m.jsx)("h4",{children:t.name})]},t.id)}))})]})]})};var Ke=["children"],ze=["children"],Ge=["children"];var Ze=function(e){var t=e.children,n=Object(i.a)(e,Ke),a=Object(E.c)((function(e){return e.auth})).isAuth;return Object(m.jsx)(l.b,Object(s.a)(Object(s.a)({},n),{},{render:function(e){var n=e.location;return a?Object(m.jsx)(l.a,{to:{pathname:"/rooms",state:{from:n}}}):t}}))},Xe=function(e){var t=e.children,n=Object(i.a)(e,ze),a=Object(E.c)((function(e){return e.auth})),r=a.user,c=a.isAuth;return Object(m.jsx)(l.b,Object(s.a)(Object(s.a)({},n),{},{render:function(e){var n=e.location;return c?c&&!r.activated?t:Object(m.jsx)(l.a,{to:{pathname:"/rooms",state:{from:n}}}):Object(m.jsx)(l.a,{to:{pathname:"/",state:{from:n}}})}}))},Ye=function(e){var t=e.children,n=Object(i.a)(e,Ge),a=Object(E.c)((function(e){return e.auth})),r=a.user,c=a.isAuth;return Object(m.jsx)(l.b,Object(s.a)(Object(s.a)({},n),{},{render:function(e){var n=e.location;return c?c&&!r.activated?Object(m.jsx)(l.a,{to:{pathname:"/activate",state:{from:n}}}):t:Object(m.jsx)(l.a,{to:{pathname:"/",state:{from:n}}})}}))},qe=function(){return function(){var e=Object(a.useState)(!0),t=Object(J.a)(e,2),n=t[0],r=t[1],c=Object(E.b)();return Object(a.useEffect)((function(){Object(N.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("".concat("http://localhost:5500","/api/refresh"),{withCredentials:!0});case 3:t=e.sent,n=t.data,c(H(n)),r(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),r(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[]),{loading:n}}().loading?Object(m.jsx)(pe,{message:"Loading, please wait.."}):Object(m.jsxs)(u.a,{children:[Object(m.jsx)(U,{}),Object(m.jsxs)(l.d,{children:[Object(m.jsx)(Ze,{path:"/",exact:!0,children:Object(m.jsx)(v,{})}),Object(m.jsx)(Ze,{path:"/authenticate",children:Object(m.jsx)(ee,{})}),Object(m.jsx)(Xe,{path:"/activate",children:Object(m.jsx)(me,{})}),Object(m.jsx)(Ye,{path:"/rooms",children:Object(m.jsx)(ke,{})}),Object(m.jsx)(Ye,{path:"/room/:id",children:Object(m.jsx)(Je,{})})]})]})},Qe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,111)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))},Ve=Object(L.a)({reducer:{auth:F,activate:ce}});o.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(E.a,{store:Ve,children:Object(m.jsx)(qe,{})})}),document.getElementById("root")),Qe()},13:function(e,t,n){e.exports={client:"Room_client__2wGVo",userHead:"Room_userHead__26urc",userAvatar:"Room_userAvatar__39D8i",goBack:"Room_goBack__35Poe",clientsWrap:"Room_clientsWrap__3pBLV",topic:"Room_topic__3UvuB",clientsList:"Room_clientsList__2I5Ur",actionBtn:"Room_actionBtn__2udsi",header:"Room_header__3tDDg",actions:"Room_actions__yLWd6",micBtn:"Room_micBtn__W0H2z",micImg:"Room_micImg__1S5yQ"}},22:function(e,t,n){e.exports={modalMask:"AddRoomModal_modalMask__26qa7",modalBody:"AddRoomModal_modalBody__w7F-h",modalHeader:"AddRoomModal_modalHeader__33pTy",roomTypes:"AddRoomModal_roomTypes__K6hho",typeBox:"AddRoomModal_typeBox__8Dc8v",active:"AddRoomModal_active__1d-3T",heading:"AddRoomModal_heading__1xL_l",subHeading:"AddRoomModal_subHeading__2SPNv",modalFooter:"AddRoomModal_modalFooter__3ORgl",footerButton:"AddRoomModal_footerButton__2czd1",closeButton:"AddRoomModal_closeButton__2f-Ds"}},24:function(e,t,n){e.exports={cardWrapper:"StepPhoneEmail_cardWrapper__68t_I",buttonWrap:"StepPhoneEmail_buttonWrap__pZglL",tabButton:"StepPhoneEmail_tabButton__1Rn9t",active:"StepPhoneEmail_active__3-HPG",actionButtonWrap:"StepPhoneEmail_actionButtonWrap__1QKo8",bottomParagraph:"StepPhoneEmail_bottomParagraph__2ZvtL"}},30:function(e,t,n){e.exports={card:"RoomCard_card__a8J28",speakers:"RoomCard_speakers__3Bjpk",avatars:"RoomCard_avatars__2vh6O",names:"RoomCard_names__NKfJB",peopleCount:"RoomCard_peopleCount__2WoUL",singleSpeaker:"RoomCard_singleSpeaker__1EpHv"}},31:function(e,t,n){e.exports={roomsHeader:"Rooms_roomsHeader__1gqfU",left:"Rooms_left__2pCcm",heading:"Rooms_heading__UD9hh",searchBox:"Rooms_searchBox__2_yTk",searchInput:"Rooms_searchInput__abMPX",startRoomButton:"Rooms_startRoomButton__YOoiF",roomList:"Rooms_roomList__3rMDT"}},37:function(e,t,n){e.exports={subHeading:"StepAvatar_subHeading__3elcx",avatarWrapper:"StepAvatar_avatarWrapper__d7gnN",avatarImage:"StepAvatar_avatarImage__3XKZX",avatarInput:"StepAvatar_avatarInput__9KU6k",avatarLabel:"StepAvatar_avatarLabel__lZUTd"}},42:function(e,t,n){e.exports={text:"Home_text__1kyfg",cardWrapper:"Home_cardWrapper__3Xawr",signinWrapper:"Home_signinWrapper__15bg9",hasInvite:"Home_hasInvite__1Da7J"}},43:function(e,t,n){e.exports={navbar:"Navigation_navbar__3A23d",logoutButton:"Navigation_logoutButton__BvJDR",navRight:"Navigation_navRight__riKjn",avatar:"Navigation_avatar__1W7A2"}},44:function(e,t,n){e.exports={wrapperwarning:"Alert_wrapperwarning__1pA2B",card:"Alert_card__1LPzZ",subject:"Alert_subject__2sK9t",icon:"Alert_icon__1m6_4","icon-times":"Alert_icon-times__2I3Ri"}},48:function(e,t,n){e.exports={card:"Card_card__1DrJB",headingWrapper:"Card_headingWrapper__21Cpz",heading:"Card_heading__2NTWC"}},49:function(e,t,n){e.exports={cardWrapper:"StepOtp_cardWrapper__3zGEA App_cardWrapper__IMz5_",bottomParagraph:"StepOtp_bottomParagraph__3AAIy StepPhoneEmail_bottomParagraph__2ZvtL",actionButtonWrap:"StepOtp_actionButtonWrap__1Jkwt StepPhoneEmail_actionButtonWrap__1QKo8"}},53:function(e,t,n){e.exports={button:"Button_button__ik8Uh",arrow:"Button_arrow__1OU0X"}},56:function(e,t,n){e.exports={message:"Loader_message__TD4Ah",spinner:"Loader_spinner__2MQv1",spin:"Loader_spin__2YEPM"}},66:function(e,t,n){e.exports={input:"TextInput_input__2eK95"}},67:function(e,t,n){e.exports={paragraph:"StepName_paragraph__2HbMO"}},78:function(e,t,n){}},[[110,1,2]]]);
//# sourceMappingURL=main.bdca235a.chunk.js.map